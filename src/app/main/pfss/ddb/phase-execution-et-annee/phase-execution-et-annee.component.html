<div class="page-layout simple fullwidth" fxLayout="column">
    <div class="header primary p-4 h-24" fxLayout="row" fxLayoutAlign="start center">
        <div fxLayout="column" fxLayoutAlign="center start">
            <div fxLayout="row" fxLayoutAlign="start center"
                style="margin-top: 0px !important; padding-top: 0px !important;">
                <mat-icon class="s-18" style="color: #0eaf3b;">home</mat-icon>
                <mat-icon class="s-18" style="color: #0eaf3b;">chevron_right</mat-icon>
                <span style="color: #0eaf3b;">Données de base</span>
                <mat-icon class="s-18" style="color: #0eaf3b;">chevron_right</mat-icon>
                <span style="color: #0eaf3b;">Phase d'exécution</span>
            </div>
        </div>
    </div>
    <mat-tab-group>
        <!-- debut PHASE D'EXÉCUTION -->
        <mat-tab label="PHASE D'EXÉCUTION">
            <div class="content p-2">
                <div class="mat-card mat-elevation-z4  m-4">
                    <div class="package-type primary h-44" fxLayout="row" fxLayoutAlign="space-between center">
                        <span class="p-12 coleur_vert">Actions
                            <!-- <button mat-button (click)="modifier()">Basic</button> -->
                            <button mat-button mat-icon-button color="fuse-navy" aria-label="Modifier"
                                (click)="modifierPhase()" *ngIf="afficher_btn_modifier_phase">
                                <mat-icon matTooltip="Modifier" class="coleur_vert">edit</mat-icon>
                            </button>
                            <button mat-button mat-icon-button color="fuse-navy" aria-label="Annuler"
                                *ngIf="afficher_btn_annuler_phase" (click)="annuler($event)">
                                <mat-icon matTooltip="Annuler" class="coleur_vert">cancel</mat-icon>
                            </button>
                            <button mat-stroked-button style="color: #0eaf3b;">
                                <mat-icon>get_app</mat-icon>
                                EXPORTER EN EXCEL
                            </button>
                        </span>
                        <span class="p-12 coleur_vert">PHASE D'EXÉCUTION</span>
                        <span class="p-12"><input type="text"
                                style="padding:8px;margin:15px auto;width:100%;color:#353A48;"
                                placeholder="Rechercher..." /></span>

                    </div>
                    <div>
                        <form [formGroup]="form_ajout_phase" fxlayout="row" *ngIf="afficher_form_ajout_phase">
                            <div fxLayout="row wrap" fxLayoutAlign="start start">
                                <mat-form-field fxFlex="15" class="pr-4">
                                    <mat-label>Sous_project</mat-label>
                                    <mat-select formControlName="id_sous_projet" [(ngModel)]="phase.id_sous_projet">
                                        <mat-option *ngFor="let sous_projet of all_sous_projet "
                                            [value]="sous_projet.id">
                                            {{ sous_projet.type }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field fxFlex="15" class="pr-4">
                                    <mat-label>Code</mat-label>
                                    <mat-select formControlName="Code" [(ngModel)]="phase.Code">
                                        <mat-option *ngFor="let phase of all_phase " [value]="phase.Code">
                                            {{ phase.Code }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field fxFlex="calc(20% - 16px)" class="pr-4">
                                    <mat-label>Tranche</mat-label>
                                    <input matInput formControlName="Phase" [(ngModel)]="phase.Phase">
                                    <mat-error>Activité ciblage obligatoire!</mat-error>
                                </mat-form-field>
                                <mat-form-field fxFlex="calc(20% - 16px)" class="pr-4">
                                    <mat-label>Montant</mat-label>
                                    <input matInput formControlName="indemnite" type="number"
                                        [(ngModel)]="phase.indemnite">
                                    <mat-error>Activité ciblage obligatoire!</mat-error>
                                </mat-form-field>
                                <mat-form-field fxFlex="calc(20% - 16px)" class="pr-4">
                                    <mat-label>Poucentage</mat-label>
                                    <input matInput formControlName="pourcentage" type="number"
                                        [(ngModel)]="phase.pourcentage">
                                    <mat-error>Activité ciblage obligatoire!</mat-error>
                                </mat-form-field>
                            </div>
                            <div fxLayoutAlign="center">
                                <button mat-raised-button color="primary" style="margin-right: 10px"
                                    (click)="enregistrerPhase(phase)" [disabled]="form_ajout_phase.invalid">
                                    <mat-label> Enregistrer </mat-label>
                                </button>
                                <button mat-raised-button color="primary" (click)="fermerFormPhase()">
                                    <mat-label> Annuler </mat-label>
                                </button>
                            </div>
                        </form>
                    </div>
                    <div>
                        <ngx-datatable class="material" [columnMode]="'force'" [headerHeight]="48" [footerHeight]="50"
                            [rowHeight]="'auto'" limit="10" [selectionType]="'single'" [rows]="all_phase" [limit]="10"
                            (select)="onSelectPhase($event)">
                            <ngx-datatable-column name="Sous projet">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                    {{ row.sous_projet.type }}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Code">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                    {{ row.Code }}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Tranche">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                    {{ row.Phase }}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Montant">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                    {{ row.indemnite }}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Pourcentage">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                    {{ row.pourcentage }}
                                </ng-template>
                            </ngx-datatable-column>
                        </ngx-datatable>
                    </div>
                </div>
            </div>
        </mat-tab>
        <!-- fin PHASE D'EXÉCUTION -->

        <!-- debut annee -->
        <!-- <mat-tab label="ANNEE"> -->
        <!--     <div class="content p-2"> -->
        <!--         <div class="mat-card mat-elevation-z4  m-4"> -->
        <!--             <div class="package-type primary h-44" fxLayout="row" fxLayoutAlign="space-between center"> -->
        <!--                 <span class="p-12 coleur_vert">Actions -->
        <!--                     <!-- <button mat-button (click)="modifier()">Basic</button> --> -->
        <!--                     <button mat-button mat-icon-button color="fuse-navy" aria-label="Ajouter"> -->
        <!--                         <mat-icon matTooltip="Ajouter" class="coleur_vert">add_circle_outline</mat-icon> -->
        <!--                     </button> -->
        <!--                     <button mat-button mat-icon-button color="fuse-navy" aria-label="Modifier"> -->
        <!--                         <mat-icon matTooltip="Modifier" class="coleur_vert">edit</mat-icon> -->
        <!--                     </button> -->
        <!--                     <button mat-button mat-icon-button color="fuse-navy" aria-label="Supprimer"> -->
        <!--                         <mat-icon matTooltip="Supprimer" class="coleur_vert">delete</mat-icon> -->
        <!--                     </button> -->


        <!--                     <button mat-button mat-icon-button color="fuse-navy" aria-label="Enregistrer"> -->
        <!--                         <mat-icon matTooltip="Enregistrer" class="coleur_vert">save</mat-icon> -->
        <!--                     </button> -->

        <!--                     <button mat-button mat-icon-button color="fuse-navy" aria-label="Annuler"> -->
        <!--                         <mat-icon matTooltip="Annuler" class="coleur_vert">cancel</mat-icon> -->
        <!--                     </button> -->
        <!--                     <button mat-stroked-button style="color: #0eaf3b;"> -->
        <!--                         <mat-icon>get_app</mat-icon> -->
        <!--                         EXPORTER EN EXCEL -->
        <!--                     </button> -->
        <!--                 </span> -->
        <!--                 <span class="p-12 coleur_vert">ANNEE</span> -->
        <!--                 <span class="p-12"><input type="text" -->
        <!--                         style="padding:8px;margin:15px auto;width:100%;color:#353A48;" -->
        <!--                         placeholder="Rechercher..." /></span> -->
        <!--             </div> -->
        <!--             <div> -->
        <!--                 <p>Hello world</p> -->
        <!--             </div> -->
        <!--         </div> -->
        <!--     </div> -->
        <!-- </mat-tab> -->
        <!-- fin annee -->
    </mat-tab-group>
</div>